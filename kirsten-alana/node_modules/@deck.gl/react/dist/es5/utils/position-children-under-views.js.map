{"version":3,"sources":["../../../src/utils/position-children-under-views.js"],"names":["positionChildrenUnderViews","children","viewports","deck","viewManager","views","length","defaultViewId","id","map","child","i","props","viewportId","log","removed","viewId","viewChildren","type","View","viewport","getViewport","viewState","getViewState","x","y","width","height","style","position","left","top","key"],"mappings":";;;;;;;;;AAAA;;AACA;;AACA;;AACA;;AAIe,SAASA,0BAAT,OAAiE;AAAA,MAA5BC,QAA4B,QAA5BA,QAA4B;AAAA,MAAlBC,SAAkB,QAAlBA,SAAkB;AAAA,MAAPC,IAAO,QAAPA,IAAO;;AAAA,cACxDA,IAAI,IAAI,EADgD;AAAA,MACvEC,WADuE,SACvEA,WADuE;;AAG9E,MAAI,CAACA,WAAD,IAAgB,CAACA,WAAW,CAACC,KAAZ,CAAkBC,MAAvC,EAA+C;AAC7C,WAAO,EAAP;AACD;;AAED,MAAMC,aAAa,GAAGH,WAAW,CAACC,KAAZ,CAAkB,CAAlB,EAAqBG,EAA3C;AAEA,SAAOP,QAAQ,CAACQ,GAAT,CAAa,UAACC,KAAD,EAAQC,CAAR,EAAc;AAChC,QAAID,KAAK,CAACE,KAAN,CAAYC,UAAhB,EAA4B;AAC1BC,gBAAIC,OAAJ,CAAY,YAAZ,EAA0B,QAA1B;AACD;;AACD,QAAIL,KAAK,CAACE,KAAN,CAAYI,MAAhB,EAAwB;AACtBF,gBAAIC,OAAJ,CAAY,QAAZ,EAAsB,QAAtB;AACD;;AAGD,QAAIC,MAAM,GAAGT,aAAb;AACA,QAAIU,YAAY,GAAGP,KAAnB;;AACA,QAAI,gCAAaA,KAAK,CAACQ,IAAnB,EAAyBC,UAAzB,CAAJ,EAAoC;AAClCH,MAAAA,MAAM,GAAGN,KAAK,CAACE,KAAN,CAAYJ,EAAZ,IAAkBD,aAA3B;AACAU,MAAAA,YAAY,GAAGP,KAAK,CAACE,KAAN,CAAYX,QAA3B;AACD;;AAED,QAAMmB,QAAQ,GAAGhB,WAAW,CAACiB,WAAZ,CAAwBL,MAAxB,CAAjB;AACA,QAAMM,SAAS,GAAGlB,WAAW,CAACmB,YAAZ,CAAyBP,MAAzB,CAAlB;;AAGA,QAAI,CAACI,QAAL,EAAe;AACb,aAAO,IAAP;AACD;;AAtB+B,QAyBzBI,CAzByB,GAyBFJ,QAzBE,CAyBzBI,CAzByB;AAAA,QAyBtBC,CAzBsB,GAyBFL,QAzBE,CAyBtBK,CAzBsB;AAAA,QAyBnBC,KAzBmB,GAyBFN,QAzBE,CAyBnBM,KAzBmB;AAAA,QAyBZC,MAzBY,GAyBFP,QAzBE,CAyBZO,MAzBY;AA2BhCV,IAAAA,YAAY,GAAG,+BAAiBA,YAAjB,EAA+B;AAC5CO,MAAAA,CAAC,EAADA,CAD4C;AAE5CC,MAAAA,CAAC,EAADA,CAF4C;AAG5CC,MAAAA,KAAK,EAALA,KAH4C;AAI5CC,MAAAA,MAAM,EAANA,MAJ4C;AAK5CP,MAAAA,QAAQ,EAARA,QAL4C;AAM5CE,MAAAA,SAAS,EAATA;AAN4C,KAA/B,CAAf;AASA,QAAMM,KAAK,GAAG;AAACC,MAAAA,QAAQ,EAAE,UAAX;AAAuBC,MAAAA,IAAI,EAAEN,CAA7B;AAAgCO,MAAAA,GAAG,EAAEN,CAArC;AAAwCC,MAAAA,KAAK,EAALA,KAAxC;AAA+CC,MAAAA,MAAM,EAANA;AAA/C,KAAd;AACA,QAAMK,GAAG,wBAAiBhB,MAAjB,cAA2BL,CAA3B,CAAT;AACA,WAAO,0BAAc,KAAd,EAAqB;AAACqB,MAAAA,GAAG,EAAHA,GAAD;AAAMxB,MAAAA,EAAE,EAAEwB,GAAV;AAAeJ,MAAAA,KAAK,EAALA;AAAf,KAArB,EAA4CX,YAA5C,CAAP;AACD,GAvCM,CAAP;AAwCD","sourcesContent":["import {createElement} from 'react';\nimport {View, log} from '@deck.gl/core';\nimport {inheritsFrom} from './inherits-from';\nimport evaluateChildren from './evaluate-children';\n\n// Iterate over views and reposition children associated with views\n// TODO - Can we supply a similar function for the non-React case?\nexport default function positionChildrenUnderViews({children, viewports, deck}) {\n  const {viewManager} = deck || {};\n\n  if (!viewManager || !viewManager.views.length) {\n    return [];\n  }\n\n  const defaultViewId = viewManager.views[0].id;\n\n  return children.map((child, i) => {\n    if (child.props.viewportId) {\n      log.removed('viewportId', '<View>')();\n    }\n    if (child.props.viewId) {\n      log.removed('viewId', '<View>')();\n    }\n\n    // Unless child is a View, position / render as part of the default view\n    let viewId = defaultViewId;\n    let viewChildren = child;\n    if (inheritsFrom(child.type, View)) {\n      viewId = child.props.id || defaultViewId;\n      viewChildren = child.props.children;\n    }\n\n    const viewport = viewManager.getViewport(viewId);\n    const viewState = viewManager.getViewState(viewId);\n\n    // Drop (auto-hide) elements with viewId that are not matched by any current view\n    if (!viewport) {\n      return null;\n    }\n\n    // Resolve potentially relative dimensions using the deck.gl container size\n    const {x, y, width, height} = viewport;\n\n    viewChildren = evaluateChildren(viewChildren, {\n      x,\n      y,\n      width,\n      height,\n      viewport,\n      viewState\n    });\n\n    const style = {position: 'absolute', left: x, top: y, width, height};\n    const key = `view-child-${viewId}-${i}`;\n    return createElement('div', {key, id: key, style}, viewChildren);\n  });\n}\n"],"file":"position-children-under-views.js"}