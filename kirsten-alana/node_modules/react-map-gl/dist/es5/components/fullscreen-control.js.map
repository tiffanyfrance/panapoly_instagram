{"version":3,"sources":["../../../src/components/fullscreen-control.js"],"names":["propTypes","Object","assign","BaseControl","className","PropTypes","string","container","object","defaultProps","FullscreenControl","props","nextState","_mapboxFullscreenControl","_fullscreen","setState","isFullscreen","_onClickFullscreen","state","_context","mapContainer","mapboxgl","showButton","_checkFullscreenSupport","document","addEventListener","_fullscreenchange","_onFullscreenChange","removeEventListener","type","label","callback","children","key","title","onClick","ref","_containerRef","_renderButton"],"mappings":"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","sourcesContent":["// Copyright (c) 2015 Uber Technologies, Inc.\n\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the \"Software\"), to deal\n// in the Software without restriction, including without limitation the rights\n// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n// copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n\n// The above copyright notice and this permission notice shall be included in\n// all copies or substantial portions of the Software.\n\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n// THE SOFTWARE.\n\nimport {document} from '../utils/globals';\nimport PropTypes from 'prop-types';\nimport BaseControl from './base-control';\nimport {createElement} from 'react';\nimport mapboxgl from '../utils/mapboxgl';\n\nconst propTypes = Object.assign({}, BaseControl.propTypes, {\n  // Custom className\n  className: PropTypes.string,\n  /* eslint-disable max-len */\n  // `container` is the [compatible DOM element](https://developer.mozilla.org/en-US/docs/Web/API/Element/requestFullScreen#Compatible_elements)\n  // which should be made full screen. By default, the map container element will be made full screen.\n  /* eslint-enable max-len */\n  container: PropTypes.object\n});\n\nconst defaultProps = Object.assign({}, BaseControl.defaultProps, {\n  className: '',\n  container: null\n});\n\nexport default class FullscreenControl extends BaseControl {\n\n  static propTypes = propTypes;\n  static defaultProps = defaultProps;\n\n  constructor(props) {\n    super(props);\n\n    this._mapboxFullscreenControl = null;\n\n    this.state = {\n      isFullscreen: false\n    };\n  }\n\n  componentDidMount() {\n    const container = this.props.container || this._context.mapContainer;\n\n    this._mapboxFullscreenControl = new mapboxgl.FullscreenControl({container});\n\n    this.setState({showButton: this._mapboxFullscreenControl._checkFullscreenSupport()});\n\n    document.addEventListener(\n      this._mapboxFullscreenControl._fullscreenchange,\n      this._onFullscreenChange\n    );\n  }\n\n  componentWillUnmount() {\n    document.removeEventListener(\n      this._mapboxFullscreenControl._fullscreenchange,\n      this._onFullscreenChange\n    );\n  }\n\n  _onFullscreenChange = () => {\n    const nextState = !this._mapboxFullscreenControl._fullscreen;\n    // this is a hack\n    // Mapbox use `_fullscreen` flag to toggle fullscreen mode\n    this._mapboxFullscreenControl._fullscreen = nextState;\n    this.setState({isFullscreen: nextState});\n  };\n\n  _onClickFullscreen = () => {\n    this._mapboxFullscreenControl._onClickFullscreen();\n  };\n\n  _renderButton(type, label, callback, children) {\n    return createElement('button', {\n      key: type,\n      className: `mapboxgl-ctrl-icon mapboxgl-ctrl-${type}`,\n      type: 'button',\n      title: label,\n      onClick: callback,\n      children\n    });\n  }\n\n  _render() {\n    if (!this.state.showButton) {\n      return null;\n    }\n\n    const {className} = this.props;\n    const {isFullscreen} = this.state;\n\n    const type = isFullscreen ? 'shrink' : 'fullscreen';\n\n    return createElement('div', {\n      className: `mapboxgl-ctrl mapboxgl-ctrl-group ${className}`,\n      ref: this._containerRef\n    }, [\n      this._renderButton(type, 'Toggle fullscreen', this._onClickFullscreen)\n    ]);\n  }\n}\n"],"file":"fullscreen-control.js"}