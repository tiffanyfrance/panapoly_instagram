import _asyncToGenerator from "@babel/runtime/helpers/esm/asyncToGenerator";
import { fetchFile } from './fetch/fetch-file';
import { isLoaderObject } from './loader-utils/normalize-loader';
import { autoDetectLoader } from './loader-utils/auto-detect-loader';
import { parse, parseInBatches } from './parse';
import { getRegisteredLoaders } from './register-loaders';
export function loadInBatches(_x, _x2, _x3) {
  return _loadInBatches.apply(this, arguments);
}

function _loadInBatches() {
  _loadInBatches = _asyncToGenerator(function* (url, loaders, options) {
    const response = yield fetchFile(url, options);
    return parseInBatches(response, loaders, options, url);
  });
  return _loadInBatches.apply(this, arguments);
}

export function load(_x4, _x5, _x6) {
  return _load.apply(this, arguments);
}

function _load() {
  _load = _asyncToGenerator(function* (url, loaders, options) {
    if (!Array.isArray(loaders) && !isLoaderObject(loaders)) {
      options = loaders;
      loaders = null;
    }

    loaders = loaders || getRegisteredLoaders();
    const loader = Array.isArray(loaders) ? autoDetectLoader(url, null, loaders) : loaders;

    if (loader && loader.loadAndParse) {
      return yield loader.loadAndParse(url, options);
    }

    const response = yield fetchFile(url, options);
    return parse(response, loaders, options, url);
  });
  return _load.apply(this, arguments);
}
//# sourceMappingURL=load.js.map