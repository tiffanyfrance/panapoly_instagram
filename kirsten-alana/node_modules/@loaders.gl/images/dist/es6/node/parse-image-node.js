import _asyncToGenerator from "@babel/runtime/helpers/esm/asyncToGenerator";
import getPixels from 'get-pixels';
import util from 'util';
import { getImageMetadata } from '../lib/get-image-metadata';
export function parseImageNode(_x, _x2) {
  return _parseImageNode.apply(this, arguments);
}

function _parseImageNode() {
  _parseImageNode = _asyncToGenerator(function* (arrayBuffer, options) {
    const getPixelsAsync = util.promisify(getPixels);

    const _getImageMetadata = getImageMetadata(arrayBuffer),
          mimeType = _getImageMetadata.mimeType;

    const buffer = arrayBuffer instanceof Buffer ? arrayBuffer : Buffer.from(arrayBuffer);
    const ndarray = yield getPixelsAsync(buffer, mimeType);
    return {
      width: ndarray.shape[0],
      height: ndarray.shape[1],
      data: ndarray.data
    };
  });
  return _parseImageNode.apply(this, arguments);
}
//# sourceMappingURL=parse-image-node.js.map