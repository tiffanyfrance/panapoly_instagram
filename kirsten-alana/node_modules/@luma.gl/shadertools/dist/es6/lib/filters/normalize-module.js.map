{"version":3,"sources":["../../../../src/lib/filters/normalize-module.js"],"names":["parsePropTypes","defaultGetUniforms","module","props","uniforms","undefined","key","value","normalizeShaderModule","normalized","propTypes","getUniforms","bind"],"mappings":"AAAA,SAAQA,cAAR,QAA6B,cAA7B;;AAEA,SAASC,kBAAT,CAA4BC,MAA5B,EAAoCC,KAApC,EAA2C;AACzC,QAAMC,QAAQ,GAAG,EAAjB;;AAEA,MAAID,KAAK,KAAKE,SAAd,EAAyB;AACvB,SAAK,MAAMC,GAAX,IAAkBJ,MAAM,CAACE,QAAzB,EAAmC;AACjCA,MAAAA,QAAQ,CAACE,GAAD,CAAR,GAAgBJ,MAAM,CAACE,QAAP,CAAgBE,GAAhB,EAAqBC,KAArC;AACD;;AACD,WAAOH,QAAP;AACD;;AAED,OAAK,MAAME,GAAX,IAAkBH,KAAlB,EAAyB;AAEvBC,IAAAA,QAAQ,CAACE,GAAD,CAAR,GAAgBH,KAAK,CAACG,GAAD,CAArB;AACD;;AAED,SAAOF,QAAP;AACD;;AAGD,OAAO,SAASI,qBAAT,CAA+BN,MAA/B,EAAuC;AAC5C,MAAI,CAACA,MAAM,CAACO,UAAZ,EAAwB;AACtBP,IAAAA,MAAM,CAACO,UAAP,GAAoB,IAApB;;AAGA,QAAIP,MAAM,CAACE,QAAX,EAAqB;AAAA,8BAGCJ,cAAc,CAACE,MAAM,CAACE,QAAR,CAHf;AAAA,YAGZM,SAHY,mBAGZA,SAHY;;AAInBR,MAAAA,MAAM,CAACE,QAAP,GAAkBM,SAAlB;AACD;;AAGD,QAAIR,MAAM,CAACE,QAAP,IAAmB,CAACF,MAAM,CAACS,WAA/B,EAA4C;AAC1CT,MAAAA,MAAM,CAACS,WAAP,GAAqBV,kBAAkB,CAACW,IAAnB,CAAwB,IAAxB,EAA8BV,MAA9B,CAArB;AACD;AACF;;AAED,SAAOA,MAAP;AACD","sourcesContent":["import {parsePropTypes} from './prop-types';\n\nfunction defaultGetUniforms(module, props) {\n  const uniforms = {};\n\n  if (props === undefined) {\n    for (const key in module.uniforms) {\n      uniforms[key] = module.uniforms[key].value;\n    }\n    return uniforms;\n  }\n\n  for (const key in props) {\n    // TODO validate, clamp etc\n    uniforms[key] = props[key];\n  }\n\n  return uniforms;\n}\n\n// Note: modifies and returns the same module\nexport function normalizeShaderModule(module) {\n  if (!module.normalized) {\n    module.normalized = true;\n\n    // Normalize uniforms\n    if (module.uniforms) {\n      // ocular linter gets confused\n      // eslint-disable-next-line\n      const {propTypes} = parsePropTypes(module.uniforms);\n      module.uniforms = propTypes;\n    }\n\n    // Build a getUniforms from the uniforms array\n    if (module.uniforms && !module.getUniforms) {\n      module.getUniforms = defaultGetUniforms.bind(null, module);\n    }\n  }\n\n  return module;\n}\n"],"file":"normalize-module.js"}