{"version":3,"sources":["../../../src/lighting/light-source.js"],"names":["Vector3","uid","DEFAULT_LIGHT_COLOR","DEFAULT_LIGHT_INTENSITY","DEFAULT_ATTENUATION","DEFAULT_LIGHT_DIRECTION","DEFAULT_LIGHT_POSITION","Light","constructor","props","id","color","intensity","AmbientLight","type","DirectionalLight","direction","normalize","toArray","PointLight","position","attenuation","_getAttenuation"],"mappings":"AAAA,SAAQA,OAAR,QAAsB,SAAtB;AACA,SAAQC,GAAR,QAAkB,UAAlB;AAGA,MAAMC,mBAAmB,GAAG,CAAC,GAAD,EAAM,GAAN,EAAW,GAAX,CAA5B;AACA,MAAMC,uBAAuB,GAAG,GAAhC;AACA,MAAMC,mBAAmB,GAAG,CAAC,CAAD,EAAI,CAAJ,EAAO,CAAP,CAA5B;AAEA,MAAMC,uBAAuB,GAAG,CAAC,GAAD,EAAM,GAAN,EAAW,CAAC,GAAZ,CAAhC;AAEA,MAAMC,sBAAsB,GAAG,CAAC,GAAD,EAAM,GAAN,EAAW,GAAX,CAA/B;;AAKA,MAAMC,KAAN,CAAY;AACVC,EAAAA,WAAW,GAAa;AAAA,QAAZC,KAAY,uEAAJ,EAAI;AACtB,SAAKC,EAAL,GAAUD,KAAK,CAACC,EAAN,IAAYT,GAAG,CAAC,OAAD,CAAzB;AADsB,yBAEgBQ,KAFhB,CAEfE,KAFe;AAAA,UAEfA,KAFe,6BAEPT,mBAFO;AAGtB,SAAKS,KAAL,GAAaA,KAAb;AAHsB,6BAIwBF,KAJxB,CAIfG,SAJe;AAAA,UAIfA,SAJe,iCAIHT,uBAJG;AAKtB,SAAKS,SAAL,GAAiBA,SAAjB;AACD;;AAPS;;AAUZ,OAAO,MAAMC,YAAN,SAA2BN,KAA3B,CAAiC;AACtCC,EAAAA,WAAW,GAAa;AAAA,QAAZC,KAAY,uEAAJ,EAAI;AACtB,UAAMA,KAAN;AACA,SAAKK,IAAL,GAAY,SAAZ;AACD;;AAJqC;AAOxC,OAAO,MAAMC,gBAAN,SAA+BR,KAA/B,CAAqC;AAC1CC,EAAAA,WAAW,GAAa;AAAA,QAAZC,KAAY,uEAAJ,EAAI;AACtB,UAAMA,KAAN;AACA,SAAKK,IAAL,GAAY,aAAZ;AAFsB,6BAGwBL,KAHxB,CAGfO,SAHe;AAAA,UAGfA,SAHe,iCAGHX,uBAHG;AAItB,SAAKW,SAAL,GAAiB,IAAIhB,OAAJ,CAAYgB,SAAZ,EAAuBC,SAAvB,GAAmCC,OAAnC,EAAjB;AACD;;AANyC;AAS5C,OAAO,MAAMC,UAAN,SAAyBZ,KAAzB,CAA+B;AACpCC,EAAAA,WAAW,GAAa;AAAA,QAAZC,KAAY,uEAAJ,EAAI;AACtB,UAAMA,KAAN;AACA,SAAKK,IAAL,GAAY,OAAZ;AAFsB,4BAGsBL,KAHtB,CAGfW,QAHe;AAAA,UAGfA,QAHe,gCAGJd,sBAHI;AAItB,SAAKc,QAAL,GAAgBA,QAAhB;AACA,SAAKC,WAAL,GAAmB,KAAKC,eAAL,CAAqBb,KAArB,CAAnB;AACD;;AAMDa,EAAAA,eAAe,CAACb,KAAD,EAAQ;AACrB,QAAI,iBAAiBA,KAArB,EAA4B;AAC1B,aAAOA,KAAK,CAACY,WAAb;AACD;;AACD,QAAI,eAAeZ,KAAnB,EAA0B;AACxB,aAAO,CAAC,CAAD,EAAI,CAAJ,EAAOA,KAAK,CAACG,SAAb,CAAP;AACD;;AACD,WAAOR,mBAAP;AACD;;AArBmC","sourcesContent":["import {Vector3} from 'math.gl';\nimport {uid} from '../utils';\n\n// default light source parameters\nconst DEFAULT_LIGHT_COLOR = [255, 255, 255];\nconst DEFAULT_LIGHT_INTENSITY = 1.0;\nconst DEFAULT_ATTENUATION = [0, 0, 1];\n\nconst DEFAULT_LIGHT_DIRECTION = [0.0, 0.0, -1.0];\n\nconst DEFAULT_LIGHT_POSITION = [0.0, 0.0, 1.0];\n\n// glTF lights reference:\n// https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_lights_punctual\n\nclass Light {\n  constructor(props = {}) {\n    this.id = props.id || uid('light');\n    const {color = DEFAULT_LIGHT_COLOR} = props;\n    this.color = color;\n    const {intensity = DEFAULT_LIGHT_INTENSITY} = props;\n    this.intensity = intensity;\n  }\n}\n\nexport class AmbientLight extends Light {\n  constructor(props = {}) {\n    super(props);\n    this.type = 'ambient';\n  }\n}\n\nexport class DirectionalLight extends Light {\n  constructor(props = {}) {\n    super(props);\n    this.type = 'directional';\n    const {direction = DEFAULT_LIGHT_DIRECTION} = props;\n    this.direction = new Vector3(direction).normalize().toArray();\n  }\n}\n\nexport class PointLight extends Light {\n  constructor(props = {}) {\n    super(props);\n    this.type = 'point';\n    const {position = DEFAULT_LIGHT_POSITION} = props;\n    this.position = position;\n    this.attenuation = this._getAttenuation(props);\n  }\n\n  // PRIVATE\n\n  // Helper: Extracts attenuation from either `props.attenuation`` or `props.intensity``\n  // Supports both sophisticated light model and the classic intensity prop\n  _getAttenuation(props) {\n    if ('attenuation' in props) {\n      return props.attenuation;\n    }\n    if ('intensity' in props) {\n      return [0, 0, props.intensity];\n    }\n    return DEFAULT_ATTENUATION;\n  }\n}\n"],"file":"light-source.js"}