{"ast":null,"code":"import getTransferList from './get-transfer-list';\nexport default function createWorker(loader) {\n  if (typeof self === 'undefined') {\n    return;\n  }\n\n  self.onmessage = function (evt) {\n    var _evt$data = evt.data,\n        arraybuffer = _evt$data.arraybuffer,\n        opts = _evt$data.opts;\n\n    try {\n      var data;\n      var parser;\n\n      if (loader.parseSync) {\n        data = arraybuffer;\n        parser = loader.parseSync;\n      } else if (loader.parseTextSync) {\n        var textDecoder = new TextDecoder();\n        data = textDecoder.decode(arraybuffer);\n        parser = loader.parseTextSync;\n      } else {\n        throw new Error(\"Could not load data with \".concat(loader.name, \" loader\"));\n      }\n\n      var result = parser(data, opts);\n      var transferList = getTransferList(result);\n      self.postMessage({\n        type: 'done',\n        result: result\n      }, transferList);\n    } catch (error) {\n      self.postMessage({\n        type: 'error',\n        message: error.message\n      });\n    }\n  };\n}","map":null,"metadata":{},"sourceType":"module"}