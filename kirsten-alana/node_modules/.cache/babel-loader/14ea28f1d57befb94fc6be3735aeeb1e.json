{"ast":null,"code":"import { isBrowser } from '../utils';\nvar isPage = isBrowser && typeof document !== 'undefined';\nvar isPageLoaded = isPage && document.readyState === 'complete';\nvar pageLoadPromise;\nexport function getPageLoadPromise() {\n  if (!pageLoadPromise) {\n    pageLoadPromise = isPage ? new Promise(function (resolve, reject) {\n      if (isPage && document.readyState === 'complete') {\n        isPageLoaded = true;\n        resolve(document);\n        return;\n      }\n\n      window.onload = function () {\n        isPageLoaded = true;\n        resolve(document);\n      };\n    }) : Promise.resolve({});\n  }\n\n  return pageLoadPromise;\n}\nexport function createCanvas(_ref) {\n  var _ref$width = _ref.width,\n      width = _ref$width === void 0 ? 800 : _ref$width,\n      _ref$height = _ref.height,\n      height = _ref$height === void 0 ? 600 : _ref$height,\n      _ref$id = _ref.id,\n      id = _ref$id === void 0 ? 'gl-canvas' : _ref$id,\n      _ref$insert = _ref.insert,\n      insert = _ref$insert === void 0 ? true : _ref$insert;\n  var canvas = document.createElement('canvas');\n  canvas.id = id;\n  canvas.style.width = Number.isFinite(width) ? \"\".concat(width, \"px\") : '100%';\n  canvas.style.height = Number.isFinite(height) ? \"\".concat(height, \"px\") : '100%';\n\n  if (insert) {\n    var body = document.body;\n    body.insertBefore(canvas, body.firstChild);\n  }\n\n  return canvas;\n}\nexport function getCanvas(_ref2) {\n  var canvas = _ref2.canvas,\n      width = _ref2.width,\n      height = _ref2.height,\n      _ref2$onError = _ref2.onError,\n      onError = _ref2$onError === void 0 ? function () {} : _ref2$onError;\n  var targetCanvas;\n\n  if (typeof canvas === 'string') {\n    if (!isPageLoaded) {\n      onError(\"createGLContext called on canvas '\".concat(canvas, \"' before page was loaded\"));\n    }\n\n    targetCanvas = document.getElementById(canvas);\n  } else if (canvas) {\n    targetCanvas = canvas;\n  } else {\n    targetCanvas = createCanvas({\n      id: 'lumagl-canvas',\n      width: width,\n      height: height,\n      onError: onError\n    });\n  }\n\n  return targetCanvas;\n}","map":null,"metadata":{},"sourceType":"module"}