{"ast":null,"code":"import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _get from \"@babel/runtime/helpers/esm/get\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport { PathLayer } from '@deck.gl/layers';\nvar defaultProps = {\n  trailLength: {\n    type: 'number',\n    value: 120,\n    min: 0\n  },\n  currentTime: {\n    type: 'number',\n    value: 0,\n    min: 0\n  }\n};\n\nvar TripsLayer = function (_PathLayer) {\n  _inherits(TripsLayer, _PathLayer);\n\n  function TripsLayer() {\n    _classCallCheck(this, TripsLayer);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(TripsLayer).apply(this, arguments));\n  }\n\n  _createClass(TripsLayer, [{\n    key: \"getShaders\",\n    value: function getShaders() {\n      var shaders = _get(_getPrototypeOf(TripsLayer.prototype), \"getShaders\", this).call(this);\n\n      shaders.inject = {\n        'vs:#decl': \"uniform float trailLength;\\nvarying float vTime;\\n\",\n        'vec3 pos = lineJoin(prevPosition, currPosition, nextPosition);': 'pos.z = 0.0;',\n        'vs:#main-end': \"float shiftZ = mod(instanceEndPositions.z, trailLength) * 1e-4;\\ngl_Position.z += shiftZ;\\nvTime = instanceStartPositions.z + (instanceEndPositions.z - instanceStartPositions.z) * vPathPosition.y / vPathLength;\\n\",\n        'fs:#decl': \"uniform float trailLength;\\nuniform float currentTime;\\nvarying float vTime;\\n\",\n        'fs:#main-start': \"if(vTime > currentTime || vTime < currentTime - trailLength) {\\n  discard;\\n}\\n\",\n        'gl_FragColor = vColor;': 'gl_FragColor.a *= 1.0 - (currentTime - vTime) / trailLength;'\n      };\n      return shaders;\n    }\n  }, {\n    key: \"draw\",\n    value: function draw(params) {\n      var _this$props = this.props,\n          trailLength = _this$props.trailLength,\n          currentTime = _this$props.currentTime;\n      params.uniforms = Object.assign({}, params.uniforms, {\n        trailLength: trailLength,\n        currentTime: currentTime\n      });\n\n      _get(_getPrototypeOf(TripsLayer.prototype), \"draw\", this).call(this, params);\n    }\n  }]);\n\n  return TripsLayer;\n}(PathLayer);\n\nexport { TripsLayer as default };\nTripsLayer.layerName = 'TripsLayer';\nTripsLayer.defaultProps = defaultProps;","map":null,"metadata":{},"sourceType":"module"}